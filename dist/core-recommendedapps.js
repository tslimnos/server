/*! For license information please see core-recommendedapps.js.LICENSE.txt */
(()=>{"use strict";var n,e={64810:(n,e,t)=>{var a=t(22200),o=t(79753),i=t(9944),r=t(20144),s=t(17499);const c=null===(p=(0,a.getCurrentUser)())?(0,s.getLoggerBuilder)().setApp("core").build():(0,s.getLoggerBuilder)().setApp("core").setUid(p.uid).build();var p,l=t(4820),d=t(16453),g=t(63560);const m={calendar:{description:(0,i.translate)("core","Schedule work & meetings, synced with all your devices."),icon:(0,o.imagePath)("core","places/calendar.svg")},contacts:{description:(0,i.translate)("core","Keep your colleagues and friends in one place without leaking their private info."),icon:(0,o.imagePath)("core","places/contacts.svg")},mail:{description:(0,i.translate)("core","Simple email app nicely integrated with Files, Contacts and Calendar."),icon:(0,o.imagePath)("core","actions/mail.svg")},spreed:{description:(0,i.translate)("core","Chatting, video calls, screensharing, online meetings and web conferencing – in your browser and with mobile apps."),icon:(0,o.imagePath)("core","apps/spreed.svg")},richdocuments:{description:(0,i.translate)("core","Collaboratively edit office documents."),icon:(0,o.imagePath)("core","apps/richdocuments.svg")},richdocumentscode:{description:(0,i.translate)("core","Local document editing back-end used by the Collabora Online app."),icon:(0,o.imagePath)("core","apps/richdocumentscode.svg")}},u=Object.keys(m),h=(0,d.loadState)("core","defaultPageUrl"),A={name:"RecommendedApps",data:()=>({loadingApps:!0,loadingAppsError:!1,apps:[],defaultPageUrl:h}),computed:{recommendedApps(){return this.apps.filter((n=>u.includes(n.id)))}},mounted(){return l.default.get((0,o.generateUrl)("settings/apps/list")).then((n=>n.data)).then((n=>{c.info("".concat(n.apps.length," apps fetched")),this.apps=n.apps.map((n=>Object.assign(n,{loading:!1,installationError:!1}))),c.debug("".concat(this.recommendedApps.length," recommended apps found"),{apps:this.recommendedApps}),this.installApps()})).catch((n=>{c.error("could not fetch app list",{error:n}),this.loadingAppsError=!0})).then((()=>{this.loadingApps=!1}))},methods:{installApps(){const n=(0,g.Z)(1),e=this.recommendedApps.filter((n=>!n.active&&n.isCompatible&&n.canInstall)).map((e=>n((()=>(c.info("installing ".concat(e.id)),e.loading=!0,l.default.post((0,o.generateUrl)("settings/apps/enable"),{appIds:[e.id],groups:[]}).catch((n=>{c.error("could not install ".concat(e.id),{error:n}),e.installationError=!0})).then((()=>{c.info("installed ".concat(e.id)),e.loading=!1})))))));c.debug("installing ".concat(e.length," recommended apps")),Promise.all(e).then((()=>{c.info("all recommended apps installed, redirecting …"),window.location=h})).catch((n=>c.error("could not install recommended apps",{error:n})))},customIcon:n=>n in m&&m[n].icon?m[n].icon:(c.warn("no app icon for recommended app ".concat(n)),(0,o.imagePath)("core","places/default-app-icon.svg")),customDescription:n=>n in m?m[n].description:(c.warn("no app description for recommended app ".concat(n)),"")}};var f=t(93379),v=t.n(f),C=t(22487);v()(C.Z,{insert:"head",singleton:!1}),C.Z.locals;const b=(0,t(51900).Z)(A,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"body-login-container"},[t("h2",[n._v(n._s(n.t("core","Recommended apps")))]),n._v(" "),n.loadingApps?t("p",{staticClass:"loading text-center"},[n._v("\n\t\t"+n._s(n.t("core","Loading apps …"))+"\n\t")]):n.loadingAppsError?t("p",{staticClass:"loading-error text-center"},[n._v("\n\t\t"+n._s(n.t("core","Could not fetch list of apps from the App Store."))+"\n\t")]):t("p",{staticClass:"text-center"},[n._v("\n\t\t"+n._s(n.t("core","Installing apps …"))+"\n\t")]),n._v(" "),n._l(n.recommendedApps,(function(e){return t("div",{key:e.id,staticClass:"app"},[t("img",{attrs:{src:n.customIcon(e.id),alt:""}}),n._v(" "),t("div",{staticClass:"info"},[t("h3",[n._v("\n\t\t\t\t"+n._s(e.name)+"\n\t\t\t\t"),e.loading?t("span",{staticClass:"icon icon-loading-small-dark"}):e.active?t("span",{staticClass:"icon icon-checkmark-white"}):n._e()]),n._v(" "),t("p",{domProps:{innerHTML:n._s(n.customDescription(e.id))}}),n._v(" "),e.installationError?t("p",[t("strong",[n._v(n._s(n.t("core","App download or installation failed")))])]):e.isCompatible?e.canInstall?n._e():t("p",[t("strong",[n._v(n._s(n.t("core","Cannot install this app")))])]):t("p",[t("strong",[n._v(n._s(n.t("core","Cannot install this app because it is not compatible")))])])])])})),n._v(" "),t("p",{staticClass:"text-center"},[t("a",{attrs:{href:n.defaultPageUrl}},[n._v(n._s(n.t("core","Cancel")))])])],2)}),[],!1,null,"19d2676a",null).exports;t.nc=btoa((0,a.getRequestToken)()),t.p=(0,o.generateFilePath)("core","","js/"),r.default.mixin({methods:{t:i.translate}}),(new(r.default.extend(b))).$mount("#recommended-apps"),c.debug("recommended apps view rendered")},22487:(n,e,t)=>{t.d(e,{Z:()=>s});var a=t(94015),o=t.n(a),i=t(23645),r=t.n(i)()(o());r.push([n.id,"p.loading[data-v-19d2676a],p.loading-error[data-v-19d2676a]{height:100px}.text-center[data-v-19d2676a]{text-align:center}.app[data-v-19d2676a]{display:flex;flex-direction:row}.app img[data-v-19d2676a]{height:50px;width:50px;filter:invert(1)}.app img[data-v-19d2676a],.app .info[data-v-19d2676a]{padding:12px}.app .info h3[data-v-19d2676a],.app .info p[data-v-19d2676a]{text-align:left}.app .info h3[data-v-19d2676a]{color:#fff;margin-top:0}.app .info h3>span.icon[data-v-19d2676a]{display:inline-block}","",{version:3,sources:["webpack://./core/src/components/setup/RecommendedApps.vue"],names:[],mappings:"AAsLA,4DACC,YAAA,CAGD,8BACC,iBAAA,CAGD,sBACC,YAAA,CACA,kBAAA,CAEA,0BACC,WAAA,CACA,UAAA,CACA,gBAAA,CAGD,sDACC,YAAA,CAIA,6DACC,eAAA,CAGD,+BACC,UAAA,CACA,YAAA,CAGD,yCACC,oBAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.body-login-container {\n\n}\n\np.loading, p.loading-error {\n\theight: 100px;\n}\n\n.text-center {\n\ttext-align: center;\n}\n\n.app {\n\tdisplay: flex;\n\tflex-direction: row;\n\n\timg {\n\t\theight: 50px;\n\t\twidth: 50px;\n\t\tfilter: invert(1);\n\t}\n\n\timg, .info {\n\t\tpadding: 12px;\n\t}\n\n\t.info {\n\t\th3, p {\n\t\t\ttext-align: left;\n\t\t}\n\n\t\th3 {\n\t\t\tcolor: #fff;\n\t\t\tmargin-top: 0;\n\t\t}\n\n\t\th3 > span.icon {\n\t\t\tdisplay: inline-block;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=r}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,a.amdD=function(){throw new Error("define cannot be used indirect")},a.amdO={},n=[],a.O=(e,t,o,i)=>{if(!t){var r=1/0;for(l=0;l<n.length;l++){t=n[l][0],o=n[l][1],i=n[l][2];for(var s=!0,c=0;c<t.length;c++)(!1&i||r>=i)&&Object.keys(a.O).every((n=>a.O[n](t[c])))?t.splice(c--,1):(s=!1,i<r&&(r=i));if(s){n.splice(l--,1);var p=o();void 0!==p&&(e=p)}}return e}i=i||0;for(var l=n.length;l>0&&n[l-1][2]>i;l--)n[l]=n[l-1];n[l]=[t,o,i]},a.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return a.d(e,{a:e}),e},a.d=(n,e)=>{for(var t in e)a.o(e,t)&&!a.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),a.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),a.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},a.nmd=n=>(n.paths=[],n.children||(n.children=[]),n),a.j=33,a.p="/dist/",(()=>{var n={33:0};a.O.j=e=>0===n[e];var e=(e,t)=>{var o,i,r=t[0],s=t[1],c=t[2],p=0;if(r.some((e=>0!==n[e]))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(c)var l=c(a)}for(e&&e(t);p<r.length;p++)i=r[p],a.o(n,i)&&n[i]&&n[i][0](),n[r[p]]=0;return a.O(l)},t=self.webpackChunknextcloud=self.webpackChunknextcloud||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})();var o=a.O(void 0,[820],(()=>a(64810)));o=a.O(o)})();
//# sourceMappingURL=core-recommendedapps.js.map?v=be7562e34233337cca99